remove-pdf-password () {
    if [ $# -ne 1 ]; then
        echo "Usage: remove-pdf-password <file.pdf>"
        return 1
    fi

    if [ ! -f "$1" ]; then
        echo "'$1' is an incorrect path"
        return 1
    fi

    local input_file="$1"
    local dir="$(dirname "$input_file")"
    local filename="$(basename "$input_file" .pdf)"
    local output_file="$dir/${filename} (Passwordless).pdf"

    echo -n "Password: "
    read -s password
    echo

    qpdf --password="$password" --decrypt "$input_file" "$output_file"

    if [ $? -eq 0 ]; then
        echo "saved passwordless PDF at $output_file"
    fi
}
